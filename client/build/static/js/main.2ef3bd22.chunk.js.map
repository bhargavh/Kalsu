{"version":3,"sources":["consts.js","components/UserInfo.js","components/ShareRequest.js","components/FileUploader.js","components/EmptyPlaceholder.js","components/Loader.js","FileChunks.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","SOCKET_EVENT","TRY_CONNECT","CONNECTED","DISCONNECTED","USERS_LIST","REQUEST_SENT","REQUEST_ACCEPTED","REQUEST_REJECTED","SEND_REQUEST","ACCEPT_REQUEST","REJECT_REQUEST","UserInfo","_ref","myUsername","timestamp","sendRequest","disabled","subtext","color","_jsx","Box","style","backgroundColor","children","_jsxs","Media","Item","renderAs","position","Image","rounded","size","alt","src","concat","generateFromString","Content","Button","fullwidth","onClick","ShareRequest","peerUsername","acceptRequest","rejectRequest","Card","margin","Header","Title","Footer","FileUploader","setFile","_useState","useState","_useState2","_slicedToArray","filePreview","setFilePreview","_useDropzone","useDropzone","multiple","onDropAccepted","acceptedFiles","type","startsWith","URL","createObjectURL","getRootProps","getInputProps","useEffect","revokeObjectURL","_objectSpread","className","fallback","EmptyPlaceholder","image","title","subtitle","Loader","text","React","Fragment","textAlign","fontSize","FileChunks","_classCallCheck","this","cnt","chunks","_createClass","key","value","chunk","push","name","console","log","file","Blob","saveAs","App","socket","useRef","peerInstance","requested","setRequested","_useState3","_useState4","sentRequest","setSentRequest","_useState5","_useState6","sending","setSending","_useState7","_useState8","receiving","setReceiving","_useState9","_useState10","rejected","setRejected","_useState11","_useState12","loading","setLoading","_useState13","_useState14","setMyUsername","_useState15","_useState16","usersList","setUsersList","_useState17","_useState18","setPeerUsername","_useState19","_useState20","peerSignal","setPeerSignal","_useState21","_useState22","_useState23","_useState24","receivedFileChunks","setReceivedFileChunks","peerConfig","iceServers","urls","username","peer","Peer","initiator","trickle","config","on","data","current","emit","to","signal","_asyncToGenerator","_regeneratorRuntime","mark","_callee","buffer","wrap","_context","prev","next","send","arrayBuffer","sent","byteLength","slice","stop","io","connect","savedUsername","localStorage","getItem","setItem","users","_ref2","_ref3","Modal","show","onClose","fileChunks","toString","save","bind","Container","fluid","Columns","vCentered","Column","length","map","_ref4","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.2ef3bd22.chunk.js","sourcesContent":["const SOCKET_EVENT = {\n    TRY_CONNECT : \"try_connect\",    \n    CONNECTED: \"connected\",\n    DISCONNECTED: \"disconnect\",\n    USERS_LIST: \"users_list\",\n    REQUEST_SENT: \"request_sent\",\n    REQUEST_ACCEPTED: \"request_accepted\",\n    REQUEST_REJECTED: \"request_rejected\",\n    SEND_REQUEST: \"send_request\",\n    ACCEPT_REQUEST: \"accept_request\",\n    REJECT_REQUEST: \"reject_request\",\n};\n\nmodule.exports.SOCKET_EVENT = SOCKET_EVENT","import {Box, Button, Content, Image, Media} from \"react-bulma-components\";\nimport {generateFromString} from \"generate-avatar\";\nimport React from \"react\";\n\nexport default function UserInfo({myUsername, timestamp, sendRequest, disabled, subtext, color}) {\n    return (\n        <Box style={!color ? {} : {backgroundColor: color}}>\n            <Media>\n                <Media.Item renderAs=\"figure\" position=\"left\">\n                    <Image rounded size={64} alt=\"64x64\"\n                           src={`data:image/svg+xml;utf8,${generateFromString(myUsername)}`}/>\n                </Media.Item>\n                <Media.Item>\n                    <Content>\n                        <p>\n                            <strong>{myUsername}</strong> <small>{timestamp}</small>\n                            <br/>\n                            {typeof sendRequest === \"function\" &&\n                            <Button disabled={disabled} fullwidth rounded color=\"info\"\n                                    onClick={() => {\n                                        sendRequest(myUsername)\n                                    }}>Share\n                                File</Button>}\n                            {subtext}\n                        </p>\n                    </Content>\n                </Media.Item>\n            </Media>\n        </Box>\n    )\n}","import {Button, Card, Content, Image, Media} from \"react-bulma-components\";\nimport {generateFromString} from \"generate-avatar\";\nimport React from \"react\";\n\nexport default function ShareRequest({peerUsername, acceptRequest, rejectRequest}) {\n    return (\n        <Card style={{margin: \"10px auto\"}}>\n            <Card.Header>\n                <Card.Header.Title>Share Request</Card.Header.Title>\n            </Card.Header>\n            <Card.Content>\n                <Media>\n                    <Media.Item renderAs=\"figure\" position=\"left\">\n                        <Image rounded size={64} alt=\"64x64\"\n                               src={`data:image/svg+xml;utf8,${generateFromString(peerUsername)}`}/>\n                    </Media.Item>\n                    <Media.Item>\n                        <Content>\n                            <p>\n                                <strong>{peerUsername}</strong>\n                                <br/>\n                                {peerUsername} wants to send you a file\n                            </p>\n                        </Content>\n                    </Media.Item>\n                </Media>\n            </Card.Content>\n            <Card.Footer>\n                <Card.Footer.Item> <Button color=\"success\" rounded onClick={acceptRequest}\n                                           fullwidth>Accept</Button></Card.Footer.Item>\n                <Card.Footer.Item><Button color=\"danger\" rounded onClick={rejectRequest}\n                                          fullwidth>Reject</Button></Card.Footer.Item>\n            </Card.Footer>\n        </Card>)\n}","import { useDropzone } from \"react-dropzone\";\nimport React, { useEffect, useState } from \"react\";\nimport { Image } from \"react-bulma-components\";\nimport \"./FileUploader.css\";\n\nexport default function FileUploader({ setFile }) {\n  const [filePreview, setFilePreview] = useState(\"\");\n  const { getRootProps, getInputProps } = useDropzone({\n    multiple: false,\n    onDropAccepted: (acceptedFiles) => {\n      setFile(acceptedFiles[0]);\n      if (acceptedFiles[0].type.startsWith(\"image\"))\n        setFilePreview(URL.createObjectURL(acceptedFiles[0]));\n      else \n        setFilePreview(\"https://cdn-icons-png.flaticon.com/512/4305/4305524.png\");\n    },\n  });\n  useEffect(\n    () => () => {\n      // Make sure to revoke the data uris to avoid memory leaks\n      URL.revokeObjectURL(filePreview);\n    },\n    [filePreview]\n  );\n  return (\n    <div {...getRootProps({ className: \"dropzone\" })}>\n      <input {...getInputProps()} />\n      <p>Drag and drop or Click to select a File</p>\n      <div>\n        <Image\n          fallback=\"https://cdn.icon-icons.com/icons2/3214/PNG/512/cloud_file_upload_server_icon_196427.png\"\n          src={filePreview}\n        />\n      </div>\n    </div>\n  );\n}\n","import {Image} from \"react-bulma-components\";\nimport React from \"react\";\nimport \"./EmptyPlaceholder.css\"\nexport default function EmptyPlaceholder({image, title, subtitle}){\n    return (\n        <div className=\"empty\">\n            <Image size={128}\n                   src={image}\n            />\n            <h1 className=\"title\">{title}</h1>\n            <h2 className=\"subtitle\">{subtitle}</h2>\n        </div>\n    )\n}","import \"./Loader.css\"\nimport React from \"react\";\n\nexport default function Loader({text}) {\n    return (\n        <React.Fragment>\n            <div className=\"loader\">Loading..</div>\n            <h1 style={{textAlign: \"center\", color: \"white\", fontSize: \"2em\"}}>{text}</h1>\n        </React.Fragment>\n    )\n}","import { saveAs } from \"file-saver\";\n\nclass FileChunks {\n  constructor() {\n    this.cnt = 0;\n    this.chunks = [];\n  }\n  getChunks() {\n    return this.chunks;\n  }\n  push(chunk) {\n    this.cnt += 1;\n    if (this.cnt === 1) {\n      this.name = chunk;\n      return;\n    }\n    if (this.cnt === 2) {\n      this.type = chunk;\n      return;\n    }\n    this.chunks.push(chunk);\n  }\n  save() {\n    console.log(this.cnt)\n    console.log(this.name , this.type , this.chunks)\n    const file = new Blob(this.chunks, { type: this.type });\n    saveAs(file, this.name);\n  }\n}\nexport default FileChunks;\n","import \"bulma/css/bulma.min.css\";\nimport \"./components/EmptyPlaceholder.css\";\nimport {\n  Container,\n  Columns,\n  Image,\n  Modal,\n  Button,\n} from \"react-bulma-components\";\nimport React, { useRef, useEffect, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport UserInfo from \"./components/UserInfo\";\nimport ShareRequest from \"./components/ShareRequest\";\nimport FileUploader from \"./components/FileUploader\";\nimport EmptyPlaceholder from \"./components/EmptyPlaceholder\";\nimport Loader from \"./components/Loader\";\nimport { SOCKET_EVENT } from \"./consts\";\nimport FileChunks from \"./FileChunks\";\n\nconst SERVER_URL = \"/\";\n\nfunction App() {\n  const socket = useRef();\n  const peerInstance = useRef();\n  const [requested, setRequested] = useState(false);\n  const [sentRequest, setSentRequest] = useState(false);\n  const [sending, setSending] = useState(false);\n  const [receiving, setReceiving] = useState(false);\n  const [rejected, setRejected] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [myUsername, setMyUsername] = useState(\"\");\n  const [usersList, setUsersList] = useState([]);\n  const [peerUsername, setPeerUsername] = useState(\"\");\n  const [peerSignal, setPeerSignal] = useState(\"\");\n  const [file, setFile] = useState(null);\n  const [receivedFileChunks, setReceivedFileChunks] = useState(null);\n\n  const peerConfig = {\n    iceServers: [\n      { urls: \"stun:stun.l.google.com:19302\" },\n      { urls: \"stun:stun1.l.google.com:19302\" },\n      { urls: \"stun:stun2.l.google.com:19302\" },\n      { urls: \"stun:stun3.l.google.com:19302\" },\n      { urls: \"stun:stun4.l.google.com:19302\" },\n    ],\n  };\n  const acceptRequest = () => {\n    setRequested(false);\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n    });\n    peer.on(\"signal\", (data) => {\n      socket.current.emit(SOCKET_EVENT.ACCEPT_REQUEST, {\n        signal: data,\n        to: peerUsername,\n      });\n    });\n    peer.on(\"connect\", () => {\n      setReceiving(true);\n    });\n    const fileChunks = new FileChunks();\n    peer.on(\"data\", (data) => {\n      if (data.toString() === \"EOF\") {\n        // Once, all the chunks are received, combine them to form a Blob\n        setReceivedFileChunks(fileChunks);\n        setReceiving(false);\n      } else {\n        // Keep appending various file chunks\n        fileChunks.push(data);\n      }\n    });\n\n    peer.signal(peerSignal);\n    peerInstance.current = peer;\n  };\n  const rejectRequest = () => {\n    socket.current.emit(SOCKET_EVENT.REJECT_REQUEST, { to: peerUsername });\n    setRequested(false);\n  };\n  const sendRequest = (username) => {\n    setLoading(true);\n    setPeerUsername(username);\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      config: peerConfig,\n    });\n    peer.on(\"signal\", (data) => {\n      socket.current.emit(SOCKET_EVENT.SEND_REQUEST, {\n        to: username,\n        signal: data,\n        username: myUsername,\n      });\n      setSentRequest(true);\n      setLoading(false);\n    });\n    peer.on(\"connect\", async () => {\n      setSending(true);\n      setSentRequest(false);\n      peer.send(file.name);\n      peer.send(file.type);\n      let buffer = await file.arrayBuffer();\n      const chunkSize = 16 * 1024;\n      while (buffer.byteLength) {\n        const chunk = buffer.slice(0, chunkSize);\n        buffer = buffer.slice(chunkSize, buffer.byteLength);\n\n        // Off goes the chunk!\n        peer.send(chunk);\n      }\n      peer.send(\"EOF\");\n      setSending(false);\n    });\n    peerInstance.current = peer;\n  };\n\n  useEffect(() => {\n    socket.current = io.connect(SERVER_URL);\n    let savedUsername = localStorage.getItem(\"username\");\n    console.log(savedUsername);\n    socket.current.emit(SOCKET_EVENT.TRY_CONNECT, {\n      savedUsername: savedUsername ? savedUsername : \"NEW_USER\",\n    });\n\n    socket.current.on(SOCKET_EVENT.CONNECTED, (username) => {\n      setMyUsername(username);\n      localStorage.setItem(\"username\", username);\n    });\n    socket.current.on(SOCKET_EVENT.USERS_LIST, (users) => {\n      setUsersList(users);\n    });\n\n    socket.current.on(SOCKET_EVENT.REQUEST_SENT, ({ signal, username }) => {\n      setPeerUsername(username);\n      setPeerSignal(signal);\n      setRequested(true);\n    });\n    socket.current.on(SOCKET_EVENT.REQUEST_ACCEPTED, ({ signal }) => {\n      peerInstance.current.signal(signal);\n    });\n    socket.current.on(SOCKET_EVENT.REQUEST_REJECTED, () => {\n      setSentRequest(false);\n      setRejected(true);\n    });\n  }, []);\n\n  return (\n    <React.Fragment>\n      <Modal\n        show={\n          receivedFileChunks ||\n          sending ||\n          receiving ||\n          sentRequest ||\n          rejected ||\n          requested\n        }\n        onClose={() => {\n          if (!sending || !receiving || !sentRequest || !requested)\n            setReceivedFileChunks(null)\n          setRejected(false);\n        }}\n      >\n        <Modal.Content>\n          {requested && (\n            <ShareRequest\n              acceptRequest={acceptRequest}\n              rejectRequest={rejectRequest}\n              peerUsername={peerUsername}\n            />\n          )}\n          {(sending || receiving || sentRequest) && (\n            <Loader\n              text={\n                sending\n                  ? \"the file is being sent, please wait...\"\n                  : sentRequest\n                  ? \"Wait till user accepts your request\"\n                  : \"receiving file, please wait... \"\n              }\n            />\n          )}\n          {rejected && (\n            <UserInfo\n              myUsername={peerUsername}\n              subtext={`${peerUsername} Rejected your request, sorry!`}\n              color=\"#ffcac8\"\n            />\n          )}\n\n          {receivedFileChunks && (\n            <React.Fragment>\n              <UserInfo\n                myUsername={peerUsername}\n                subtext={`${peerUsername} has sent you this file`}\n                color=\"#c7ffcc\"\n              />\n              <Button\n                color=\"warning\"\n                rounded\n                onClick={receivedFileChunks.save.bind(receivedFileChunks)}\n                fullwidth\n              >\n                Download\n              </Button>\n            </React.Fragment>\n          )}\n        </Modal.Content>\n      </Modal>\n      <Container fluid>\n        <Columns vCentered=\"true\">\n          <Columns.Column size=\"three-fifths\">\n            <UserInfo\n              myUsername={myUsername}\n              subtext=\"Share files or even pictures anonymously with your friends, ;)\"\n              color=\"#CE93D8\"\n            />\n            <FileUploader setFile={setFile} />\n          </Columns.Column>\n          <Columns.Column>\n            {usersList.length > 1 ? (\n              usersList.map(\n                ({ username, timestamp }) =>\n                  username !== myUsername && (\n                    <UserInfo\n                      key={username}\n                      myUsername={username}\n                      timestamp={timestamp}\n                      sendRequest={sendRequest}\n                      disabled={!file || loading}\n                    />\n                  )\n              )\n            ) : (\n              <EmptyPlaceholder\n                title=\"No Users Online Right Now!\"\n                subtitle=\"Wait till someone connects to start sharing\"\n                image=\"data:image/png;base64,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\"\n              />\n            )}\n          </Columns.Column>\n        </Columns>\n      </Container>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './components/EmptyPlaceholder.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\n\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}